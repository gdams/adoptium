"use strict";(self.webpackChunkadoptium_website=self.webpackChunkadoptium_website||[]).push([[7695],{1908:function(e,t,n){n.r(t),n.d(t,{Head:function(){return _},default:function(){return w},formatDiv:function(){return E}});var a=n(8453),l=n(6540);function s(e){const t=Object.assign({p:"p",h2:"h2",span:"span",a:"a",ul:"ul",li:"li"},(0,a.RP)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.p,null,"With the latest releases from July 2022 (8u342, 11.0.16, 17.0.4 and 18.0.2)\nwe provide GPG signatures along with our releases which you can use to\nverify that the downloads you have are genuine and have not been tampered\nwith since we built them.  This gives a quick crib sheet of what you need to\ndo to verify the downloads."),"\n",l.createElement(t.h2,null,"What is GPG signing?"),"\n",l.createElement(t.p,null,"In the use case we are talking about here, GPG signing is a cryptographic\nprocess whereby a private/public keypair is used to confirm that a file has\nnot been tampered with between when it was published and it being delivered\nto the end user.  The private key is used by Adoptium to produce the\nsignature file which can be downloaded along with the OpenJDK binaries, and\nthe public key can be obtained by you and used to verify the the signature\nis valid, proving the integrity of the file and also that it was signed by\nAdoptium and not modified by a third party."),"\n",l.createElement(t.h2,null,"The download site already provides SHA256 checksums. Why would I need this?"),"\n",l.createElement(t.p,null,"While going into the details of public key encryption is beyond the scope of\nthis article, if there was a man in the middle attack that resulted in the\ndownloads you receive being compromised, then the corresponding SHA\nchecksums could also be compromised.  GPG signing avoids this issue by using\na separately certified signature which you can initially trust and then\nverify subsequent downloads."),"\n",l.createElement(t.h2,null,"What do I need to do to obtain the signatures?"),"\n",l.createElement(t.p,null,"The link to the signatures is provided in the metadata for our releases.  In\nthe following examples I will use JDK17 but you can change the calls\nappropriately for other versions:"),"\n",l.createElement(t.p,null,"The metadata that contains the URL of the signature file can be obtained\nas follows:"),"\n",l.createElement(t.p,null,l.createElement(t.span,{dangerouslySetInnerHTML:{__html:"<code class=\"language-text\">curl 'https://api.adoptium.net/v3/assets/feature_releases/17/ga' > adopt.json</code>"}})),"\n",l.createElement(t.p,null,"Once you’ve downloaded that you need to extract the ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">link</code>'}})," and\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">signature_link</code>'}})," entries using your preferred JSON parsing tool.  The\ninformation you want is in the ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">binaries[0].package.link</code>'}})," and\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">binaries[0].package.signature_link</code>'}})," section of the file for the most recent\nversion."),"\n",l.createElement(t.p,null,"The following example uses the ",l.createElement(t.a,{href:"https://stedolan.github.io/jq/"},"jq")," command-line JSON\nparsing tool to pull out the information for Linux/x64 and download the\nproduct and the GPG signature using the ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">curl</code>'}})," command (change accordingly\nfor other platforms)"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">jq <span class="token string">\'.[0].binaries[] | select(.architecture=="x64") | select (.os=="linux") | select (.image_type=="jdk") .package.link\'</span> adopt.json <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">curl</span> <span class="token parameter variable">-LO</span>\njq <span class="token string">\'.[0].binaries[] | select(.architecture=="x64") | select (.os=="linux") | select (.image_type=="jdk") .package.signature_link\'</span> adopt.json <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">curl</span> <span class="token parameter variable">-LO</span></code></pre></div>'}}),"\n",l.createElement(t.p,null,"Note that as mentioned in the previous section, we also provide the\nsha256sums which can be obtained from the JSON file with"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">jq <span class="token string">\'.[0].binaries[] | select(.architecture=="x64") | select (.os=="linux") | select (.image_type=="jdk") .package.checksum\'</span> adopt.json</code></pre></div>'}}),"\n",l.createElement(t.p,null,"The SHA checksums can be verified against the output from running one of the\nfollowing commands depending on your operating system:"),"\n",l.createElement(t.ul,null,"\n",l.createElement(t.li,null,"Windows: ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">certUtil -hashfile file SHA256</code>'}})),"\n",l.createElement(t.li,null,"MacOS: ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">shasum -a 256 file</code>'}})),"\n",l.createElement(t.li,null,"UNIX/Linux: ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">sha256sum file</code>'}})),"\n"),"\n",l.createElement(t.p,null,"The SHA checksum allows you to verift that the download has occurred without\nerrors, and the GPG checksum additionally verifies the binaries are those\nreleased by the Adoptium project."),"\n",l.createElement(t.h2,null,"How do I verify the signatures once I have them?"),"\n",l.createElement(t.p,null,"You will need to have the ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">gpg</code>'}})," tool installed in order to verify the\nsignatures.  You can then run the following command to check the signature by supplying the signature file and the corresponding file which the signature is for e.g.:"),"\n",l.createElement(t.p,null,l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">gpg --verify OpenJDK17U-jdk_x64_linux_hotspot_17.0.4_8.tar.gz.sig OpenJDK17U-jdk_x64_linux_hotspot_17.0.4_8.tar.gz</code>'}})),"\n",l.createElement(t.p,null,"If you do not currently have the Adoptium project’s public signing key you will get a message such as this:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="output"><pre class="language-output"><code class="language-output">gpg: directory &#39;/home/sxa/.gnupg&#39; created\ngpg: keybox &#39;/home/sxa/.gnupg/pubring.kbx&#39; created\ngpg: Signature made Mon Jul  4 18:20:31 2022 UTC\ngpg:                using RSA key 3B04D753C9050D9A5D343F39843C48A565F8F04B\ngpg: Can&#39;t check signature: No public key</code></pre></div>'}}),"\n",l.createElement(t.p,null,"To resolve this message you need to acquire the public key that was used to\nsign the binaries.  You can download it from a trusted GPG server, for\nexample to use the Ubuntu key servers run this command:"),"\n",l.createElement(t.p,null,l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">gpg --keyserver keyserver.ubuntu.com --recv-keys 3B04D753C9050D9A5D343F39843C48A565F8F04B</code>'}})),"\n",l.createElement(t.p,null,"If you then run the verify command you will get a message indicating that the newly imported key has not been trusted:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="output"><pre class="language-output"><code class="language-output">gpg: Good signature from &quot;Adoptium GPG Key (DEB/RPM Signing Key)\n&lt;temurin-dev@eclipse.org&gt;&quot; [unknown] gpg: WARNING: This key is not certified\nwith a trusted signature!  gpg: There is no indication that the signature\nbelongs to the owner.</code></pre></div>'}}),"\n",l.createElement(t.p,null,"While the “Good signature” message gives you some\nconfidence that the download is valid, to fully trust the certificate and\nremove the final warning you can run the following then follow the prompts\nto grant ultimate trust to it:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">gpg --edit-key 3B04D753C9050D9A5D343F39843C48A565F8F04B trust</code></pre></div>'}}),"\n",l.createElement(t.p,null,"The verification should then succeed as follows:"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="output"><pre class="language-output"><code class="language-output">gpg: Signature made Mon Jul  4 18:20:31 2022 UTC\ngpg:                using RSA key 3B04D753C9050D9A5D343F39843C48A565F8F04B\ngpg: checking the trustdb\ngpg: marginals needed: 3  completes needed: 1  trust model: pgp\ngpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u\ngpg: Good signature from &quot;Adoptium GPG Key (DEB/RPM Signing Key) &lt;temurin-dev@eclipse.org&gt;&quot; [ultimate]</code></pre></div>'}}),"\n",l.createElement(t.h2,null,"OK I know what commands to run, but what are the implications of those steps?"),"\n",l.createElement(t.p,null,"For more information on GPG signing and the impliations of the different steps in the process above, see the\n",l.createElement(t.a,{href:"https://wiki.eclipse.org/Platform-releng/How_to_check_integrity_of_downloads#Example_of_using_GPG_with_the_checksums_files"},"integrity checking article from Eclipse")))}var r=function(e={}){const{wrapper:t}=Object.assign({},(0,a.RP)(),e.components);return t?l.createElement(t,e,l.createElement(s,e)):s(e)},o=n(4755),i=n(1197),c=n(5895),u=n(8297),d=n(720),g=n(9694),h=n(548),m=n(1169),p=n(1939),f=n(9122),y=n(279);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(null,arguments)}const E=e=>e.dangerouslySetInnerHTML.__html.includes('class="language-text"')?l.createElement("code",e):l.createElement("div",e),k={GuestPost:g.A,blockquote:e=>l.createElement("blockquote",b({style:{paddingLeft:"1.5rem",borderLeft:".3rem solid hsla(0,0%,0%,0.9)"},className:"blockquote"},e)),table:e=>l.createElement("table",b({className:"table table-hover"},e)),thead:e=>l.createElement("thead",b({className:"table-dark"},e)),li:e=>l.createElement("li",b({style:{marginBottom:"1.5em"}},e)),img:e=>l.createElement(y.A,e),div:E},v=({data:e,pageContext:t,location:n,children:s})=>{const r=e.mdx,{previous:c,next:g}=t,y=d[r.frontmatter.author],b=r.frontmatter.tags;return l.createElement(i.A,null,l.createElement("section",{className:"py-5 container"},l.createElement("div",{className:"row py-lg-5"},l.createElement("div",{className:"col-lg-9 col-md-9 mx-auto"},l.createElement("article",null,l.createElement("header",{className:"pb-5"},l.createElement("h1",{className:"mb-0",style:{fontWeight:"900"}},r.frontmatter.title),l.createElement(h.A,{date:r.frontmatter.date,author:y.name,identifier:r.frontmatter.author}),l.createElement(m.A,{location:n,siteMetadata:e.site.siteMetadata,post:r.frontmatter})),l.createElement(a.xA,{components:k},s),l.createElement(p.A,{tags:b}),l.createElement(f.A,null),l.createElement("hr",{className:"p-3"}),l.createElement("footer",{className:"pb-5"},l.createElement(u.Ay,{identifier:r.frontmatter.author,author:y}))),l.createElement("div",null,l.createElement("ul",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",listStyle:"none",padding:0}},l.createElement("li",null,g&&l.createElement(o.Link,{to:g.fields.postPath,rel:"next"},"← ",g.frontmatter.title)),l.createElement("li",null,c&&l.createElement(o.Link,{to:c.fields.postPath,rel:"prev"},c.frontmatter.title," →"))))))))};function w(e){return l.createElement(v,e,l.createElement(r,e))}const _=({data:e})=>{const t=e.mdx;let n="";return t.frontmatter&&t.frontmatter.featuredImage&&(n=t.frontmatter.featuredImage.childImageSharp.gatsbyImageData.images.fallback.src),l.createElement(c.A,{title:t.frontmatter.title,description:t.frontmatter.description||t.excerpt,twitterCard:n})}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-content-blog-gpg-signed-releases-index-md-d999a8a473d4b3f99f9f.js.map